# The Verilog source code
This directory contains the source code for the DMA wrapper which acts as the interface between your custom accelerators and the input/output of the data DMA module, as well as the code for the control module (interacting with the control DMA) and sample code for a CNN accelerator. Respectively, these can be found in ```DMA_wrapper.v```, ```control_module.v```, and the CNN code in the ```/CNN/``` subdirectory. This document describes these files. In order to fully understand the DMA wrapper and the control module, however, it is important to understand how the DMA modules themselves work, especially the **AXI4-Stream protocol** over which they operate.  

## DMA & AXI4-Stream
Direct memory access, or _DMA_, is a method to access the system's main memory (usually DDR4 or similar) to transceive information between the on-board microcontroller (processing system, PS) and the programmable logic (PL). Importantly, the microcontroller only needs to signal to a separate DMA controller whenever it intends to send or receive information. Xilinx's AXI DMA IP can read out whatever data is committed to memory by the PS and transmit it to other (user-designed) IP within the PL design over the **AXI4-Stream protocol**. AXI4-Stream is a lightweight, unidirectional data transport protocol in the AXI4 family, designed for high-throughput, low-latency streaming between IP blocks. Unlike other AXI4 protocols, as the name would imply, AXI4-Stream _streams_ the data: the designated buffer in the memory is read out sequentially in bursts of pre-determined size and then transmitted to downstream IP blocks at a rate of one burst per clock cycle. To ensure this transfer occurs succesfully, AXI4-Stream makes use of a **valid/ready handshake** between its connected IP. To mediate this process, AXI4-Stream primarily makes use of the following signals: 
- ```TDATA``` holds the packet of information, of configurable width;
- ```TVALID```, driven by the slave, asserts when meaningful data is available at the ```TDATA``` port;
- ```TREADY```, driven by the master, indicating when said downstream IP block is ready to receive information;
- ```TLAST```, driven by the slave, asserted when the data available at ```TDATA``` is the end of the packet to be sent.

Optionally, AXI4-Stream permits the use of a number of additional (diagnostic) signals, such as ```TDEST``` or ```TKEEP```. I recommend reading the documentation of the protocol in case you think these might be useful; I haven't found them particularly useful to the end of designing this system.  

